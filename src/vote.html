<html>
  <head>
    <script src="/lib/js/socket.io-1.2.0.js"></script>
    <script src="/lib/js/jquery-1.11.1.js"></script>
    <script src="/lib/js/jquery.flot.js"></script>
    <script src="/lib/js/jquery.flot.categories.js"></script>
    <style>
      #placeholder{
        width: 100%;
        height: 100%;
        font-size: 14px;
        line-height: 1.2em;
      }
    </style>
    <script>
      $(document).init(function() {
        var channel = io('/audienceChannel');

        channel.emit('show votes', 'hello');

        channel.on('show votes', function(votes) {
          console.log(votes);
          var dataForShown = new Array();
//          var counter = 0;
          for(var key in votes){
            dataForShown.push([key, votes[key]]);
//            counter += 1;
          }
          $.plot("#placeholder",[dataForShown], {
            series: {
              bars: {
                show: true,
                barWidth: 0.6,
                align: "center",
              },
            },
            xaxis: {
              mode: "categories",
              tickLength: 0,
            }
          });


        });
      });
    </script>
  </head>
  <body>
    <div id="placeholder"></div>
  </body>
</html>
